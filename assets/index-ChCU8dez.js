import{u as K,a as R,g as V,d as H,_ as L}from"./index-Bd1oa3-l.js";/* empty css              */import{_ as U}from"./queryIpLink.vue_vue_type_script_setup_true_lang-B0KPMCxe.js";import{f as m,a6 as S,ak as $,j as b,s as z,t,y as n,a2 as a,p as D,v as _,x as d}from"./libs-DaDHWX8D.js";import{j as E,S as y,T as x,t as J,au as q}from"./arcoDesign-DkbNuMsn.js";async function F(o){const e=K();await e.serverAvailable;const s=new URL(R(e.endpoint,"api/bans/ranks"),location.href);return s.searchParams.set("page",String(o.page)),o.pageSize&&s.searchParams.set("pageSize",String(o.pageSize)),o.filter&&s.searchParams.set("filter",o.filter),fetch(s,{headers:V()}).then(r=>(e.assertResponseLogin(r),r.json()))}const G={class:"search-box"},M=m({__name:"rankTable",setup(o){const{t:e}=S(),s=[{title:()=>e("page.topban.top50Table.column.ipaddress"),slotName:"address"},{title:()=>e("page.topban.top50Table.column.historyCount"),dataIndex:"count"}],{data:r,total:i,current:c,loading:p,pageSize:P,changeCurrent:C,changePageSize:v,run:T}=$(F,{defaultParams:[{page:1,pageSize:20}],pagination:{currentKey:"page",pageSizeKey:"pageSize",totalKey:"data.total"}},[H]),w=g=>{T({page:1,pageSize:20,filter:g})};return(g,Q)=>{const u=E,h=y,k=x,I=J;return b(),z(h,{direction:"vertical",size:"small"},{default:t(()=>{var f;return[n(u,{style:{width:"250px"},placeholder:a(e)("page.banlist.banlist.searchPlaceHolder"),"allow-clear":"","search-button":"",onChange:w},null,8,["placeholder"]),n(I,{stripe:"","sticky-header":"",columns:s,data:(f=a(r))==null?void 0:f.data.results,"column-resizable":"",loading:a(p),pagination:{total:a(i),current:a(c),pageSize:a(P),showPageSize:!0,baseSize:4,bufferSize:1},"filter-icon-align-left":"",onPageChange:a(C),onPageSizeChange:a(v)},{"ip-filter":t(({filterValue:l,setFilterValue:N,handleFilterConfirm:j,handleFilterReset:A})=>[D("div",G,[n(h,{direction:"vertical"},{default:t(()=>[n(u,{"model-value":l[0],placeholder:a(e)("page.topban.top50Table.searchPlaceholder"),"allow-clear":"",onSearch:j,onClear:A,onInput:B=>N([B])},null,8,["model-value","placeholder","onSearch","onClear","onInput"])]),_:2},1024)])]),address:t(({record:l})=>[n(k,{style:{"white-space":"nowrap"}},{default:t(()=>[n(U,{ip:l.peerIp,style:{color:"var(--color-text-1)"}},{default:t(()=>[_(d(l.peerIp),1)]),_:2},1032,["ip"])]),_:2},1024)]),_:1},8,["data","loading","pagination","onPageChange","onPageSizeChange"])]}),_:1})}}}),O=L(M,[["__scopeId","data-v-50e90f40"]]),ae=m({__name:"index",setup(o){const{t:e}=S();return(s,r)=>{const i=q,c=x,p=y;return b(),z(p,{direction:"vertical",size:"large"},{default:t(()=>[n(i,null,{default:t(()=>[_(d(a(e)("page.topban.usage")),1)]),_:1}),n(c,{style:{"font-size":"1.2em"}},{default:t(()=>[_(d(a(e)("page.topban.description")),1)]),_:1}),n(O)]),_:1})}}});export{ae as default};
